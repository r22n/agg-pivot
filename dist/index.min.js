(()=>{var e={10:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defagg=s.aggregate=s.frombuf=void 0;const a=t(960);s.frombuf=function(e,s){const t={headers:{names:e.slice(0,s),cols:{}},distinct:{},table:e.slice(s),rows:(e.length-s)/s};t.headers.names.forEach(((e,s)=>{t.headers.cols[e]=s,t.distinct[e]={}}));for(const[e,s]of(0,a.seq)([0,0],[t.headers.names.length,t.rows])){const a=t.headers.names[e],o=t.headers.cols[a],r=t.table[t.headers.names.length*s+o];t.distinct[a][r]=1}return t},s.aggregate=function(e,t){const o={rows:[],cols:[],sums:t.sums.concat(),table:{}},r={rows:t.rows.map((s=>Object.keys(e.distinct[s]))),cols:t.cols.map((s=>Object.keys(e.distinct[s])))};(0,a.seq)(t.rows.map((()=>0)),t.rows.map(((e,s)=>r.rows[s].length))).forEach((e=>{o.rows.push(e.map(((e,s)=>({value:r.rows[s][e],name:t.rows[s]}))))})),(0,a.seq)(t.cols.map((()=>0)),t.cols.map(((e,s)=>r.cols[s].length))).forEach((e=>{o.cols.push(e.map(((e,s)=>({value:r.cols[s][e],name:t.cols[s]}))))}));const n=Object.assign({},s.defagg,t.agg),c={rows:t.rows.length?o.rows.map((e=>e.map((({value:e})=>e)).reduce(n.keys))):[],cols:t.cols.length?o.cols.map((e=>e.map((({value:e})=>e)).reduce(n.keys))):[],sums:o.sums.reduce(n.keys)};o.rows.map(((s,t)=>o.cols.map(((a,r)=>o.sums.map((l=>{const d=n.rcid(c.rows[t],c.cols[r],l);if(!n.postif(s,a))return;let m=n.zero;for(let t=0;t<e.rows;t++)if([...s,...a].every((({name:s,value:a})=>e.table[e.headers.names.length*t+e.headers.cols[s]]===a))){const o=n.cast(e.table[e.headers.names.length*t+e.headers.cols[l]]);m=n.add(m,o,s,a)}o.table[d]=n.post(m)}))))));const l=[{name:n.wkey,value:n.wkey}];return o.rows.map(((s,t)=>o.sums.map((a=>{const r=n.rcid(c.rows[t],n.wkey,a);if(!n.postif(s,l))return;let d=n.zero;for(let t=0;t<e.rows;t++)if(s.every((({name:s,value:a})=>e.table[e.headers.names.length*t+e.headers.cols[s]]===a))){const o=n.cast(e.table[e.headers.names.length*t+e.headers.cols[a]]);d=n.add(d,o,s,l)}o.table[r]=n.post(d)})))),o.cols.map(((s,t)=>o.sums.map((a=>{const r=n.rcid(n.wkey,c.cols[t],a);if(!n.postif(l,s))return;let d=n.zero;for(let t=0;t<e.rows;t++)if(s.every((({name:s,value:a})=>e.table[e.headers.names.length*t+e.headers.cols[s]]===a))){const o=n.cast(e.table[e.headers.names.length*t+e.headers.cols[a]]);d=n.add(d,o,l,s)}o.table[r]=n.post(d)})))),o.sums.map((s=>{const t=n.rcid(n.wkey,n.wkey,s);if(!n.postif(l,l))return;let a=n.zero;for(let t=0;t<e.rows;t++){const o=n.cast(e.table[e.headers.names.length*t+e.headers.cols[s]]);a=n.add(a,o,l,l)}o.table[t]=n.post(a)})),o},s.defagg={add:(e,s)=>e+s,keys:(e,s)=>`${e}/${s}`,wkey:"*",rcid:(e,s,t)=>`${e}&${s}&${t}`,zero:0,cast:e=>{const s=Number(e);return isNaN(s)?0:s},post:e=>e,postif:()=>!0}},960:(e,s)=>{"use strict";function t(e,s){let t=e.length-1;for(;t>=0&&++e[t]>=s[t];t--)e[t]=0;return t}Object.defineProperty(s,"__esModule",{value:!0}),s.seq=s.next=void 0,s.next=t,s.seq=function(e,s){if(!s.length||s.some((e=>0===e)))return[];const a=[];for(let o=e.concat(),r=0;-1!==r;r=t(o,s))a.push(o.concat());return a}}},s={};function t(a){var o=s[a];if(void 0!==o)return o.exports;var r=s[a]={exports:{}};return e[a](r,r.exports,t),r.exports}(()=>{const{defagg:e,aggregate:s,frombuf:a}=t(10);window.aggpivot={defagg:e,aggregate:s,frombuf:a}})()})();